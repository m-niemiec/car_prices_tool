{% extends 'car_prices_tool/base.html' %}
{% load static %}
{% load dict_get_key_value %}

{% block content %}

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
    </head>
    <body>
    <div class="jumbotron jumbotron-fluid vertical-center">
        <div class="container">
            <h1 class="display-4">Results:</h1>
            Apparently you were looking for {{ state }} {{ make }} {{ model }} in {{ offer_type }} offer types.
            {% if mileage_less_more %}
                {% if mileage_less_more is 'mileage_less_than' %}
                    With mileage less than {{ mileage }}.
                {% endif %}
                {% if mileage_less_more is 'mileage_more_than' %}
                    With mileage more than {{ mileage }}.
                {% endif %}
            {% endif %}
            {% if production_year_less_more %}
                {% if production_year_less_more is 'production_year_less_than' %}
                    Produced earlier than {{ production_year }}.
                {% endif %}
                {% if production_year_less_more is 'production_year_more_than' %}
                    Produced later than {{ production_year }}.
                {% endif %}
            {% endif %}
            {% if price_less_more %}
                {% if price_less_more is 'price_less_than' %}
                    With price less than {{ price }} {{ price_currency }}.
                {% endif %}
                {% if price_less_more is 'price_more_than' %}
                    With price more than {{ price }} {{ price_currency }}.
                {% endif %}
            {% endif %}
            {% if engine_capacity_less_more %}
                {% if engine_capacity_less_more is 'engine_capacity_less_than' %}
                    With engine capacity less than {{ engine_capacity }}.
                {% endif %}
                {% if engine_capacity_less_more is 'engine_capacity_more_than' %}
                    With engine capacity more than {{ engine_capacity }}.
                {% endif %}
                {% if engine_capacity_less_more is 'engine_capacity_equal' %}
                    With engine capacity equal to {{ engine_capacity }}.
                {% endif %}
            {% endif %}
            {% if engine_power_less_more %}
                {% if engine_power_less_more is 'engine_power_less_than' %}
                    And engine power less than {{ engine_capacity }}.
                {% endif %}
                {% if engine_power_less_more is 'engine_power_more_than' %}
                    And engine power more than {{ engine_capacity }}.
                {% endif %}
            {% endif %}
            <br>
            This many cars matched your filters: {{ cars_amount }}.
            <br>

        <h1 class="display-6">Your results have:</h1>

            <table class="table">
                <thead>
                <tr>
                    <th scope="col">Avg. Price (PLN)</th>
                    <th scope="col">Avg. Price (USD)</th>
                    <th scope="col">Avg. Price (EUR)</th>
                    <th scope="col">Avg. Mileage (kms)</th>
                    <th scope="col">Avg. Production Year</th>
                    <th scope="col">Avg. Engine Power (HP)</th>
                    <th scope="col">Avg. Engine Capacity (L)</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>{{ average_price }}</td>
                    <td>{{ average_price }}</td>
                    <td>{{ average_price }}</td>
                    <td>{{ average_mileage }}</td>
                    <td>{{ average_production_year }}</td>
                    <td>{{ average_engine_power }}</td>
                    <td>{{ average_engine_capacity }}</td>
                </tr>
                </tbody>
            </table>
            <br>
            <h1 class="display-6">10 most popular model variants within your results are:</h1>
            <table class="table table-striped table-hover">
                <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Model Variant</th>
                    <th scope="col">Count</th>
                    <th scope="col">Avg. Price (PLN)</th>
                    <th scope="col">Avg. Price (USD)</th>
                    <th scope="col">Avg. Price (EUR)</th>
                    <th scope="col">Avg. Mileage (kms)</th>
                    <th scope="col">Avg. Production Year</th>
                    <th scope="col">Avg. Engine Power (HP)</th>
                    <th scope="col">Avg. Engine Capacity (L)</th>
                </tr>
                </thead>
                <tbody>
                {% for variant in popular_model_variants %}
                    <tr>
                        <th scope="row">{{ forloop.counter }}</th>
                        <td>{{ variant.model_variant }}</td>
                        <td>{{ variant.count }}</td>
                        <td>{% get_item pmv_dict variant.model_variant 0 %}</td>
                        <td>{% get_item pmv_dict variant.model_variant 1 %}</td>
                        <td>{% get_item pmv_dict variant.model_variant 2 %}</td>
                        <td>{% get_item pmv_dict variant.model_variant 3 %}</td>
                        <td>{% get_item pmv_dict variant.model_variant 4 %}</td>
                        <td>{% get_item pmv_dict variant.model_variant 5 %}</td>
                        <td>{% get_item pmv_dict variant.model_variant 6 %}</td>
                    </tr>
                {% endfor %}


                </tbody>
            </table>

        Learn more about {{ popular_model_variants.1.model_variant }}


{#            {{ make }}<br>#}
{#            {{ state }}<br>#}
{#            {{ model }}<br>#}
{#            {{ offer_type }}<br>#}
{#            {{ mileage_less_more }}<br>#}
{#            {{ mileage }}<br>#}
{#            {{ production_year_less_more }}<br>#}
{#            {{ production_year }}<br>#}
{#            {{ price_less_more }}<br>#}
{#            {{ price }}<br>#}
{#            {{ price_currency }}<br>#}
{#            {{ engine_capacity_less_more }}<br>#}
{#            {{ engine_capacity }}<br>#}
{#            {{ engine_power_less_more }}<br>#}
{#            {{ engine_power }}<br>#}

        </div>
    </body>
    </html>

{% endblock %}